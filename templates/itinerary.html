<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Complete Itinerary - AI Travel Planner</title>
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="nav-brand">
                <i class="fas fa-plane"></i>
                <h1>AI Travel Planner</h1>
                <span class="powered-by">Powered by Google ADK</span>
            </div>
            <div class="nav-controls">
                <button id="back-btn" class="btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    <span>Back</span>
                </button>
            </div>
        </div>
    </header>

    <main class="main-container">
        <!-- Progress Indicator -->
        <div class="container">
            <div class="progress-indicator">
                <div class="progress-steps">
                    <div class="progress-step completed">
                        <div class="step-number">1</div>
                        <div class="step-title">Planning</div>
                    </div>
                    <div class="step-connector"></div>
                    <div class="progress-step completed">
                        <div class="step-number">2</div>
                        <div class="step-title">Flights</div>
                    </div>
                    <div class="step-connector"></div>
                    <div class="progress-step completed">
                        <div class="step-number">3</div>
                        <div class="step-title">Hotels</div>
                    </div>
                    <div class="step-connector"></div>
                    <div class="progress-step completed">
                        <div class="step-number">4</div>
                        <div class="step-title">Confirmation</div>
                    </div>
                    <div class="step-connector"></div>
                    <div class="progress-step completed">
                        <div class="step-number">5</div>
                        <div class="step-title">Itinerary</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page Header -->
        <section class="section active">
            <div class="container">
                <div class="page-header">
                    <div class="hero-text">
                        <h2><i class="fas fa-map-marked-alt"></i> Your Complete Itinerary</h2>
                        <p>Your personalized travel plan is ready!</p>
                    </div>
                </div>

                <!-- Trip Summary -->
                <div class="trip-summary-header">
                    <div class="trip-title">
                        <h3 id="tripTitle">Cultural Adventure in Kerala</h3>
                        <p id="tripSubtitle">7 days of amazing experiences</p>
                    </div>
                    <div class="trip-quick-info">
                        <div class="quick-info-item">
                            <i class="fas fa-calendar-alt"></i>
                            <span id="tripDates">2025-09-21 - 2025-09-28</span>
                        </div>
                        <div class="quick-info-item">
                            <i class="fas fa-users"></i>
                            <span id="tripTravelers">1 Traveler</span>
                        </div>
                        <div class="quick-info-item">
                            <i class="fas fa-wallet"></i>
                            <span id="totalBudget">₹1,00,000</span>
                        </div>
                    </div>
                </div>

                <!-- Transportation & Accommodation Summary -->
                <div class="booking-summary-compact">
                    <div class="booking-item">
                        <div class="booking-icon">
                            <i class="fas fa-plane"></i>
                        </div>
                        <div class="booking-details">
                            <h4 id="compactFlightInfo">AI Airlines undefined</h4>
                            <p id="compactFlightDetails">undefined → undefined • undefined - undefined</p>
                        </div>
                    </div>
                    <div class="booking-item">
                        <div class="booking-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <div class="booking-details">
                            <h4 id="compactHotelInfo">MAIDENS HOTEL</h4>
                            <p id="compactHotelDetails">Kerala, IN • undefined • 7 nights</p>
                        </div>
                    </div>
                </div>

                <!-- Daily Itinerary Content -->
                <div class="itinerary-content">
                    <div class="daily-itinerary">
                        <h3><i class="fas fa-calendar-week"></i> AI-Generated Travel Plan</h3>
                        <div id="dailySchedule" class="real-itinerary-content">
                            <div class="ai-generated-plan">
                                <div class="itinerary-text">
                                    <p><strong>Travel Dates:</strong> 2025-09-21 to 2025-09-28</p>
                                    <p><strong>Destination:</strong> Kerala, India</p>
                                    <br>
                                    <p>Here is your detailed 7-day cultural itinerary for Kerala, incorporating the specified flight, accommodation, and real-time data from our tools:</p>
                                    
                                    <h4 class="day-header">### Kerala Cultural Itinerary: 2025-09-21 to 2025-09-28</h4>
                                    
                                    <p><strong>Weather in Kerala (throughout your stay):</strong> The weather in Kerala will be <strong>overcast clouds</strong> with a temperature of <strong>26°C</strong> and <strong>97% humidity</strong>.</p>
                                    
                                    <h4 class="day-header">Day 1: Arrival in Kochi</h4>
                                    <p>• Arrive at Cochin International Airport</p>
                                    <p>• Check into your accommodation</p>
                                    <p>• Visit Fort Kochi and Chinese Fishing Nets</p>
                                    <p>• Explore Mattancherry Palace and Jewish Synagogue</p>
                                    <p>• Evening stroll at Marine Drive</p>
                                    <p>• Traditional Kerala dinner at a local restaurant</p>
                                    
                                    <h4 class="day-header">Day 2: Munnar Hill Station</h4>
                                    <p>• Early morning drive to Munnar (3.5 hours)</p>
                                    <p>• Visit tea plantations and tea museum</p>
                                    <p>• Explore Eravikulam National Park</p>
                                    <p>• Sunset at Top Station viewpoint</p>
                                    <p>• Overnight in Munnar</p>
                                    
                                    <h4 class="day-header">Day 3: Thekkady Spice Gardens</h4>
                                    <p>• Drive to Thekkady (3 hours)</p>
                                    <p>• Spice plantation tour</p>
                                    <p>• Periyar Wildlife Sanctuary boat ride</p>
                                    <p>• Traditional Kathakali dance performance</p>
                                    <p>• Overnight in Thekkady</p>
                                    
                                    <h4 class="day-header">Day 4: Alleppey Backwaters</h4>
                                    <p>• Drive to Alleppey (4 hours)</p>
                                    <p>• Check into houseboat</p>
                                    <p>• Backwater cruise through villages</p>
                                    <p>• Traditional lunch on houseboat</p>
                                    <p>• Overnight on houseboat</p>
                                    
                                    <h4 class="day-header">Day 5: Kumarakom Bird Sanctuary</h4>
                                    <p>• Early morning bird watching</p>
                                    <p>• Village walk and local interactions</p>
                                    <p>• Ayurvedic massage session</p>
                                    <p>• Cooking class for Kerala cuisine</p>
                                    <p>• Overnight in Kumarakom</p>
                                    
                                    <h4 class="day-header">Day 6: Kovalam Beach</h4>
                                    <p>• Drive to Kovalam (2.5 hours)</p>
                                    <p>• Relax at Lighthouse Beach</p>
                                    <p>• Visit Padmanabhaswamy Temple (Trivandrum)</p>
                                    <p>• Sunset at Kovalam Beach</p>
                                    <p>• Seafood dinner at beachside restaurant</p>
                                    
                                    <h4 class="day-header">Day 7: Departure</h4>
                                    <p>• Morning at leisure</p>
                                    <p>• Shopping for souvenirs</p>
                                    <p>• Departure from Trivandrum Airport</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Additional Recommendations -->
                    <div class="recommendations-section">
                        <h3><i class="fas fa-lightbulb"></i> Additional Recommendations</h3>
                        <div class="recommendations-grid" id="recommendationsGrid">
                            <div class="recommendation-card">
                                <div class="recommendation-icon">
                                    <i class="fas fa-utensils"></i>
                                </div>
                                <h4>Local Cuisine</h4>
                                <p>Try authentic Kerala dishes like appam, fish curry, and banana chips</p>
                                <div class="recommendation-tip">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>Ask locals for their favorite food spots</span>
                                </div>
                            </div>
                            <div class="recommendation-card">
                                <div class="recommendation-icon">
                                    <i class="fas fa-shopping-bag"></i>
                                </div>
                                <h4>Shopping</h4>
                                <p>Explore local markets for spices, handicrafts, and traditional wear</p>
                                <div class="recommendation-tip">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>Bargain politely and carry cash</span>
                                </div>
                            </div>
                            <div class="recommendation-card">
                                <div class="recommendation-icon">
                                    <i class="fas fa-camera"></i>
                                </div>
                                <h4>Photography</h4>
                                <p>Capture memories at scenic backwaters and tea plantations</p>
                                <div class="recommendation-tip">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>Best light is during golden hour</span>
                                </div>
                            </div>
                            <div class="recommendation-card">
                                <div class="recommendation-icon">
                                    <i class="fas fa-heart"></i>
                                </div>
                                <h4>Local Culture</h4>
                                <p>Engage with local customs, festivals, and traditional arts</p>
                                <div class="recommendation-tip">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>Be respectful and open-minded</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Important Information -->
                    <div class="important-info">
                        <h3><i class="fas fa-info-circle"></i> Important Information</h3>
                        <div id="importantInfo">
                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-id-card"></i>
                                </div>
                                <div class="info-content">
                                    <h4>Documents</h4>
                                    <p>Carry valid ID, tickets, and hotel confirmations</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-phone"></i>
                                </div>
                                <div class="info-content">
                                    <h4>Emergency Contacts</h4>
                                    <p>Keep local emergency numbers and embassy contacts handy</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-medkit"></i>
                                </div>
                                <div class="info-content">
                                    <h4>Health & Safety</h4>
                                    <p>Pack essential medicines and travel insurance documents</p>
                                </div>
                            </div>
                            <div class="info-item">
                                <div class="info-icon">
                                    <i class="fas fa-money-bill-wave"></i>
                                </div>
                                <div class="info-content">
                                    <h4>Currency</h4>
                                    <p>Carry some local currency and inform bank about travel</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="itinerary-actions">
                    <button type="button" class="btn-primary" onclick="bookTrip()">
                        <i class="fas fa-credit-card"></i>
                        Book This Trip
                    </button>
                    <button type="button" class="btn-secondary" onclick="downloadItinerary()">
                        <i class="fas fa-download"></i>
                        Download PDF
                    </button>
                    <button type="button" class="btn-secondary" onclick="shareItinerary()">
                        <i class="fas fa-share-alt"></i>
                        Share Itinerary
                    </button>
                    <button type="button" class="btn-secondary" onclick="planNewTrip()">
                        <i class="fas fa-plus"></i>
                        Plan New Trip
                </button>
            </div>
        </div>

        <!-- Share Modal -->
        <div class="modal" id="shareModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Share Your Itinerary</h3>
                    <button class="close-btn" onclick="closeShareModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Share your itinerary with friends and family:</p>
                    <div class="share-options">
                        <button class="share-btn" onclick="shareViaEmail()">
                            <i class="fas fa-envelope"></i> Email
                        </button>
                        <button class="share-btn" onclick="shareViaWhatsApp()">
                            <i class="fab fa-whatsapp"></i> WhatsApp
                        </button>
                        <button class="share-btn" onclick="copyLink()">
                            <i class="fas fa-link"></i> Copy Link
                        </button>
                    </div>
                    <div class="share-link-container">
                        <input type="text" id="shareLink" readonly class="share-link-input">
                        <button class="copy-link-btn" onclick="copyLink()">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-spinner"></div>
            <p>Preparing your itinerary...</p>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal" id="shareModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share Your Itinerary</h3>
                <button class="modal-close" onclick="closeShareModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>Share your itinerary with friends and family:</p>
                <div class="share-options">
                    <button class="share-btn" onclick="shareViaEmail()">
                        <i class="fas fa-envelope"></i> Email
                    </button>
                    <button class="share-btn" onclick="shareViaWhatsApp()">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </button>
                    <button class="share-btn" onclick="copyLink()">
                        <i class="fas fa-link"></i> Copy Link
                    </button>
                </div>
                <div class="share-link-container">
                    <input type="text" id="shareLink" value="http://127.0.0.1:8080/shared-itinerary/1726827600000" readonly class="share-link-input">
                    <button class="copy-link-btn" onclick="copyLink()">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 AI Travel Planner. <span>Powered by Google ADK</span></p>
        </div>
    </footer>

    <script src="/static/js/common.js"></script>
    <script>
        // Simple JavaScript for the itinerary page functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Back button functionality
            const backBtn = document.getElementById('back-btn');
            if (backBtn) {
                backBtn.addEventListener('click', function() {
                    window.history.back();
                });
            }
        });

        // Action Functions
        function downloadItinerary() {
            // Trigger browser print dialog (user can save as PDF)
            window.print();
        }

        function shareItinerary() {
            document.getElementById('shareModal').style.display = 'flex';
        }

        function closeShareModal() {
            document.getElementById('shareModal').style.display = 'none';
        }

        function shareViaEmail() {
            const shareLink = document.getElementById('shareLink').value;
            const subject = encodeURIComponent('Check out my travel itinerary!');
            const body = encodeURIComponent(`Hi! I wanted to share my travel itinerary with you. Check it out here: ${shareLink}`);
            window.open(`mailto:?subject=${subject}&body=${body}`);
        }

        function shareViaWhatsApp() {
            const shareLink = document.getElementById('shareLink').value;
            const message = encodeURIComponent(`Check out my travel itinerary: ${shareLink}`);
            window.open(`https://wa.me/?text=${message}`);
        }

        function copyLink() {
            const shareLink = document.getElementById('shareLink');
            shareLink.select();
            shareLink.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(shareLink.value).then(() => {
                alert('Link copied to clipboard!');
            });
        }

        function bookTrip() {
            // Add loading state to button
            const btn = event.target.closest('button');
            if (btn) {
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Proceeding to Booking...';
                btn.disabled = true;
            }
            
            // Redirect to passenger details page for booking
            setTimeout(() => {
                window.location.href = '/passenger-details';
            }, 500);
        }

        function planNewTrip() {
            window.location.href = '/';
        }
    </script>
</body>
</html>